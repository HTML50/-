<!DOCTYPE html>
<html>
<head>
<script src="js/react.js"></script>
<script src='js/react-dom.js'></script>
<script src="js/browser.min.js"></script>
</head>
<body>
<div id='root'></div>
<script type='text/babel'>
const scaleNames = {
c:'Celsius',
f:'Fahrenheit'
};

function toCelsius(f){
return (f - 32) * 5 / 9;
}

function toFahrenheit(c){
return (c * 9 / 5) + 32;
}

function tryConvert(value,convert){
const input = parseFloat(value);
if(Number.isNaN(input)) return '';
console.log(input)
const number= parseFloat(input)
const rs = convert(number)
return rs;
}

function BoilingVerdict(props){
if(props.value>=100) return <p>水沸腾了！</p>;
return <p>水还没有沸腾</p>;
}

class Input extends React.Component{
	constructor(props){
		super(props)
		this.handle = this.handle.bind(this)
	}

	handle(e){
		this.props.onChange(e.target.value)
	}

	render(){
		const value=this.props.value;
		return(
			<fieldset>
			<legend>请输入{this.props.scale}温度</legend>
			<input value={value} onChange={this.handle} />
			</fieldset>
		)
	}
}

class Calculator extends React.Component{
	constructor(props){
		super(props)
		this.state = {value:'',scale: 'c'}
		this.handleC = this.handleC.bind(this)
		this.handleF = this.handleF.bind(this)
	}

	handleC(value){
	
	this.setState({value:value,scale:'c'})
	}
	
	handleF(value){
	
	this.setState({value:value,scale:'f'})
	}

	render(){
		const value =this.state.value;
		const celsius = this.state.scale === 'f' ? tryConvert(value, toCelsius) : value;
		const fahrenheit = this.state.scale === 'c' ? tryConvert(value, toFahrenheit) : value;
		return(
		<div>
			<Input value={celsius} scale={scaleNames.c} onChange={this.handleC} />
			<Input value={fahrenheit} scale={scaleNames.f} onChange={this.handleF} />
			<BoilingVerdict value={celsius} />
		</div>
		)
	}
}

ReactDOM.render(
	<Calculator />,
	document.getElementById('root')
)




</script>
</body>
</html>
